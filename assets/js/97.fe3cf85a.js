(window.webpackJsonp=window.webpackJsonp||[]).push([[97],{341:function(o,t,e){"use strict";e.r(t);var l=e(28),_=Object(l.a)({},(function(){var o=this,t=o.$createElement,e=o._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":o.$parent.slotKey}},[e("h1",{attrs:{id:"_9-7-使用-go-install-安装自定义包"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_9-7-使用-go-install-安装自定义包"}},[o._v("#")]),o._v(" 9.7 使用 go install 安装自定义包")]),o._v(" "),e("p",[o._v("go install 是 Go 中自动包安装工具：如需要将包安装到本地它会从远端仓库下载包：检出、编译和安装一气呵成。")]),o._v(" "),e("p",[o._v("在包安装前的先决条件是要自动处理包自身依赖关系的安装。被依赖的包也会安装到子目录下，但是没有文档和示例：可以到网上浏览。")]),o._v(" "),e("p",[o._v("go install 使用了 GOPATH 变量(详见第 2.2 节)。")]),o._v(" "),e("p",[o._v("远端包(详见第 9.5 节)：")]),o._v(" "),e("p",[o._v("假设我们要安装一个有趣的包 tideland（它包含了许多帮助示例，参见 "),e("a",{attrs:{href:"http://code.google.com/p/tideland-cgl",target:"_blank",rel:"noopener noreferrer"}},[o._v("项目主页"),e("OutboundLink")],1),o._v("）。")]),o._v(" "),e("p",[o._v("因为我们需要创建目录在 Go 安装目录下，所以我们需要使用 root 或者 su 的身份执行命令。")]),o._v(" "),e("p",[o._v("确保 Go 环境变量已经设置在 root 用户下的 "),e("code",[o._v("./bashrc")]),o._v(" 文件中。")]),o._v(" "),e("p",[o._v("使用命令安装："),e("code",[o._v("go install tideland-cgl.googlecode.com/hg")]),o._v("。")]),o._v(" "),e("p",[o._v("可执行文件 "),e("code",[o._v("hg.a")]),o._v(" 将被放到 "),e("code",[o._v("$GOROOT/pkg/linux_amd64/tideland-cgl.googlecode.com")]),o._v(" 目录下，源码文件被放置在 "),e("code",[o._v("$GOROOT/src/tideland-cgl.googlecode.com/hg")]),o._v(" 目录下，同样有个 "),e("code",[o._v("hg.a")]),o._v(" 放置在 "),e("code",[o._v("_obj")]),o._v(" 的子目录下。")]),o._v(" "),e("p",[o._v("现在就可以在 go 代码中使用这个包中的功能了，例如使用包名 cgl 导入：")]),o._v(" "),e("div",{staticClass:"language-go extra-class"},[e("pre",{pre:!0,attrs:{class:"language-go"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[o._v("import")]),o._v(" cgl "),e("span",{pre:!0,attrs:{class:"token string"}},[o._v('"tideland-cgl.googlecode.com/hg"')]),o._v("\n")])])]),e("p",[o._v("从 Go1 起 go install 安装 Google Code 的导入路径形式是："),e("code",[o._v('"code.google.com/p/tideland-cgl"')])]),o._v(" "),e("p",[o._v("升级到新的版本：")]),o._v(" "),e("p",[o._v("更新到新版本的 Go 之后本地安装包的二进制文件将全被删除。如果你想更新，重编译、重安装所有的go安装包可以使用："),e("code",[o._v("go install -a")]),o._v("。")]),o._v(" "),e("p",[o._v("go 的版本发布的很频繁，所以需要注意发布版本和包的兼容性。go1 之后都是自己编译自己了。")]),o._v(" "),e("p",[o._v("go install 同样可以使用 go install 编译链接并安装本地自己的包（详见第 9.8.2 节）。")]),o._v(" "),e("p",[o._v("更多信息可以在 "),e("a",{attrs:{href:"http://golang.org/cmd/go/",target:"_blank",rel:"noopener noreferrer"}},[o._v("官方网站"),e("OutboundLink")],1),o._v(" 找到。")]),o._v(" "),e("h2",{attrs:{id:"链接"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#链接"}},[o._v("#")]),o._v(" 链接")]),o._v(" "),e("ul",[e("li",[e("RouterLink",{attrs:{to:"/go-doc/directory.html"}},[o._v("目录")])],1),o._v(" "),e("li",[o._v("上一节："),e("RouterLink",{attrs:{to:"/go-doc/09.6.html"}},[o._v("为自定义包使用 godoc")])],1),o._v(" "),e("li",[o._v("下一节："),e("RouterLink",{attrs:{to:"/go-doc/09.8.html"}},[o._v("自定义包的目录结构、go install 和 go test")])],1)])])}),[],!1,null,null,null);t.default=_.exports}}]);